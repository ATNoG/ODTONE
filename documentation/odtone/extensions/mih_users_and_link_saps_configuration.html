<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>MIH-Users and Link SAPs configuration</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../index.html" title="ODTONE 0.5">
<link rel="up" href="../extensions.html" title="ODTONE Extensions">
<link rel="prev" href="remote_discovery.html" title="Remote discovery">
<link rel="next" href="mih_protocol_c_interface.html" title="MIH Protocol C interface">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="'ODTONE - Open Dot Twenty One'" width="100" height="100" src="../.././images/logo.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="remote_discovery.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../extensions.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="mih_protocol_c_interface.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="odtone.extensions.mih_users_and_link_saps_configuration"></a><a class="link" href="mih_users_and_link_saps_configuration.html" title="MIH-Users and Link SAPs configuration">MIH-Users
      and Link SAPs configuration</a>
</h3></div></div></div>
<p>
        One of the extensions provided by the ODTONE is a mechanism which allows
        the MIH-Users or the Link SAPs to dynamically register with the MIHF, named
        <a class="link" href="local_discovery.html" title="Local discovery">local discovery</a>.
      </p>
<p>
        However this mechanism is optional and, therefore, the statically configuration
        of the MIH-Users and Link SAPs is still possible. In this section we will
        depict the many ways to configure the MIH-Users and Link SAPs.
      </p>
<h5>
<a name="odtone.extensions.mih_users_and_link_saps_configuration.h0"></a>
        <span><a name="odtone.extensions.mih_users_and_link_saps_configuration.mih_users_configuration"></a></span><a class="link" href="mih_users_and_link_saps_configuration.html#odtone.extensions.mih_users_and_link_saps_configuration.mih_users_configuration">MIH-Users
        configuration</a>
      </h5>
<p>
        <span class="bold"><strong>Using the local discovery mechanism</strong></span>
      </p>
<p>
        You just need to configure in the MIH-User configuration file the following
        options:
</p>
<pre class="programlisting"><span class="error">#</span><span class="error">#</span>
<span class="error">#</span><span class="preprocessor"># Commands</span> <span class="identifier">supported</span> <span class="identifier">by</span> <span class="identifier">the</span> <span class="identifier">MIH</span><span class="special">-</span><span class="identifier">User</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.:</span> <span class="identifier">commands</span> <span class="special">=</span> <span class="identifier">mih_link_get_parameters</span><span class="special">,</span> <span class="identifier">mih_link_configure_thresholds</span>
<span class="error">#</span><span class="preprocessor">#
commands</span> <span class="special">=</span> <span class="special">&lt;</span><span class="identifier">comma</span> <span class="identifier">separated</span> <span class="identifier">list</span> <span class="identifier">of</span> <span class="identifier">supported</span> <span class="identifier">commands</span><span class="special">&gt;</span>

<span class="error">#</span><span class="error">#</span>
<span class="error">#</span><span class="preprocessor"># Queries</span> <span class="identifier">supported</span> <span class="identifier">by</span> <span class="identifier">the</span> <span class="identifier">MIH</span><span class="special">-</span><span class="identifier">User</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">:</span> <span class="identifier">queries</span> <span class="special">=</span> <span class="identifier">iq_type_binary_data</span><span class="special">,</span> <span class="identifier">iq_type_rdf_data</span>
<span class="error">#</span><span class="preprocessor">#
queries</span> <span class="special">=</span> <span class="special">&lt;</span><span class="identifier">comma</span> <span class="identifier">separated</span> <span class="identifier">list</span> <span class="identifier">of</span> <span class="identifier">supported</span> <span class="identifier">queries</span><span class="special">&gt;</span>
</pre>
<p>
      </p>
<p>
        <span class="bold"><strong>Statically configuration on the MIHF</strong></span>
      </p>
<p>
        You need to configure in the ODTONE-MIHF configuration file the following
        options:
</p>
<pre class="programlisting"><span class="error">#</span><span class="error">#</span>
<span class="error">#</span><span class="preprocessor"># Comma</span> <span class="identifier">separated</span> <span class="identifier">list</span> <span class="identifier">of</span> <span class="identifier">local</span> <span class="identifier">MIH</span> <span class="identifier">User</span> <span class="identifier">SAPs</span> <span class="identifier">id</span><span class="error">'</span><span class="identifier">s</span> <span class="keyword">and</span> <span class="identifier">ports</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.</span><span class="number">1</span><span class="special">:</span> <span class="identifier">users</span> <span class="special">=</span> <span class="identifier">user</span> <span class="number">1234</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.</span><span class="number">2</span><span class="special">:</span> <span class="identifier">users</span> <span class="special">=</span> <span class="identifier">user</span> <span class="number">1234</span> <span class="identifier">mih_net_ho_candidate_query</span> <span class="identifier">iq_type_binary_data</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.</span><span class="number">3</span><span class="special">:</span> <span class="identifier">users</span> <span class="special">=</span> <span class="identifier">user</span> <span class="number">1234</span> <span class="identifier">iq_type_binary_data</span>
<span class="error">#</span><span class="preprocessor">#
users</span> <span class="special">=</span> <span class="special">&lt;</span><span class="identifier">user</span> <span class="identifier">sap</span> <span class="identifier">id</span><span class="special">&gt;</span> <span class="special">&lt;</span><span class="identifier">port</span><span class="special">&gt;</span> <span class="special">[&lt;</span><span class="identifier">supported</span> <span class="identifier">commands</span><span class="special">&gt;</span> <span class="special">&lt;</span><span class="identifier">supported</span> <span class="identifier">queries</span><span class="special">&gt;],</span> <span class="special">...</span>
</pre>
<p>
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
<p>
          As presented on the previous example, the MIH-User can be configured in
          many ways. If the supported commands are not configured (e.g.1 and e.g.3)
          the MIHF will assume that the MIH-User supports all commands. However,
          this behaviour does not work for the supported queries, since its MIIS
          specific. In this way, if the supported queries are not configured (e.g.1)
          the MIHF will assume that the MIH-User does not support any query.
        </p>
<p>
          Also, the configuration of the supported commands and supported queries
          can be specified (e.g.2) and, therefore, the MIHF will assume that the
          MIH-User only supports the configured commands and queries.
        </p>
</td></tr>
</table></div>
<h5>
<a name="odtone.extensions.mih_users_and_link_saps_configuration.h1"></a>
        <span><a name="odtone.extensions.mih_users_and_link_saps_configuration.link_saps_configuration"></a></span><a class="link" href="mih_users_and_link_saps_configuration.html#odtone.extensions.mih_users_and_link_saps_configuration.link_saps_configuration">Link
        SAPs configuration</a>
      </h5>
<p>
        <span class="bold"><strong>Using the local discovery mechanism</strong></span>
      </p>
<p>
        You just need to configure in the Link SAP configuration file the following
        options:
</p>
<pre class="programlisting"><span class="error">#</span><span class="error">#</span>
<span class="error">#</span><span class="preprocessor"># Link</span> <span class="identifier">SAP</span> <span class="identifier">interface</span> <span class="identifier">technology</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.:</span> <span class="identifier">tec</span> <span class="special">=</span> <span class="number">802</span><span class="identifier">_11</span>
<span class="error">#</span><span class="preprocessor">#
tec</span> <span class="special">=</span> <span class="special">&lt;</span><span class="identifier">interface</span><span class="special">&gt;</span>

<span class="error">#</span><span class="error">#</span>
<span class="error">#</span><span class="preprocessor"># Link</span> <span class="identifier">SAP</span> <span class="identifier">interface</span> <span class="identifier">address</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.:</span> <span class="identifier">link_addr</span> <span class="special">=</span> <span class="number">00</span><span class="special">:</span><span class="number">11</span><span class="special">:</span><span class="number">22</span><span class="special">:</span><span class="number">33</span><span class="special">:</span><span class="number">44</span><span class="special">:</span><span class="number">55</span>
<span class="error">#</span><span class="preprocessor">#
link_addr</span> <span class="special">=</span> <span class="special">&lt;</span><span class="identifier">interface</span> <span class="identifier">address</span><span class="special">&gt;</span>
</pre>
<p>
      </p>
<p>
        <span class="bold"><strong>Statically configuration on the MIHF</strong></span>
      </p>
<p>
        You need to configure in the ODTONE-MIHF configuration file the following
        options:
</p>
<pre class="programlisting"><span class="error">#</span><span class="error">#</span>
<span class="error">#</span><span class="preprocessor"># Comma</span> <span class="identifier">separated</span> <span class="identifier">list</span> <span class="identifier">of</span> <span class="identifier">local</span> <span class="identifier">MIH</span> <span class="identifier">Link</span> <span class="identifier">SAPs</span> <span class="identifier">id</span><span class="error">'</span><span class="identifier">s</span> <span class="keyword">and</span> <span class="identifier">ports</span><span class="special">.</span>
<span class="error">#</span><span class="preprocessor"># e</span><span class="special">.</span><span class="identifier">g</span><span class="special">.:</span> <span class="identifier">links</span> <span class="special">=</span> <span class="identifier">link</span> <span class="number">1235</span> <span class="number">802</span><span class="identifier">_11</span> <span class="number">00</span><span class="special">:</span><span class="number">11</span><span class="special">:</span><span class="number">22</span><span class="special">:</span><span class="number">33</span><span class="special">:</span><span class="number">44</span><span class="special">:</span><span class="number">55</span>
<span class="error">#</span><span class="preprocessor">#
links</span> <span class="special">=</span> <span class="special">&lt;</span><span class="identifier">link</span> <span class="identifier">sap</span> <span class="identifier">id</span><span class="special">&gt;</span> <span class="special">&lt;</span><span class="identifier">port</span><span class="special">&gt;</span> <span class="special">&lt;</span><span class="identifier">technology</span> <span class="identifier">type</span><span class="special">&gt;</span> <span class="special">&lt;</span><span class="identifier">interface</span><span class="special">&gt;,</span> <span class="special">...</span>
</pre>
<p>
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          In what concerns technology type, the MIHF only supports Ethernet, IEEE
          802.11, IEEE 802.16, IEEE 802.20, IEEE 802.22 configuration.
        </p></td></tr>
</table></div>
<h5>
<a name="odtone.extensions.mih_users_and_link_saps_configuration.h2"></a>
        <span><a name="odtone.extensions.mih_users_and_link_saps_configuration.deactivate_local_discovery"></a></span><a class="link" href="mih_users_and_link_saps_configuration.html#odtone.extensions.mih_users_and_link_saps_configuration.deactivate_local_discovery">Deactivate
        local discovery</a>
      </h5>
<p>
        By default the MIH-Users and Link SAPs provided by ODTONE have the local
        discovery enabled, i.e., at the bootstrap they send a registration message
        to their local MIHF. If you want to deactivate this behaviour you need to
        comment the following lines in the correspondent constructor:
      </p>
<p>
        <span class="bold"><strong>MIH-User</strong></span>
</p>
<pre class="programlisting"><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">message</span> <span class="identifier">m</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">optional</span><span class="special">&lt;</span><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">mih_cmd_list</span><span class="special">&gt;</span> <span class="identifier">supp_cmd</span> <span class="special">=</span> <span class="identifier">parse_supported_commands</span><span class="special">(</span><span class="identifier">cfg</span><span class="special">);</span>

<span class="identifier">m</span> <span class="special">&lt;&lt;</span> <span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">indication</span><span class="special">(</span><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">indication</span><span class="special">::</span><span class="identifier">user_register</span><span class="special">)</span>
	<span class="special">&amp;</span> <span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">tlv_command_list</span><span class="special">(</span><span class="identifier">supp_cmd</span><span class="special">);</span>
<span class="identifier">m</span><span class="special">.</span><span class="identifier">destination</span><span class="special">(</span><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">id</span><span class="special">(</span><span class="string">"local-mihf"</span><span class="special">));</span>

<span class="identifier">_mihf</span><span class="special">.</span><span class="identifier">async_send</span><span class="special">(</span><span class="identifier">m</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">bind</span><span class="special">(&amp;</span><span class="identifier">mih_user</span><span class="special">::</span><span class="identifier">user_reg_handler</span><span class="special">,</span> <span class="keyword">this</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">cref</span><span class="special">(</span><span class="identifier">cfg</span><span class="special">),</span> <span class="identifier">_2</span><span class="special">));</span>
</pre>
<p>
      </p>
<p>
        <span class="bold"><strong>MIIS RDF Server</strong></span>
</p>
<pre class="programlisting"><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">message</span> <span class="identifier">m</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">optional</span><span class="special">&lt;</span><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">iq_type_list</span><span class="special">&gt;</span> <span class="identifier">supp_iq</span> <span class="special">=</span> <span class="identifier">parse_supported_queries</span><span class="special">(</span><span class="identifier">cfg</span><span class="special">);</span>

<span class="identifier">m</span> <span class="special">&lt;&lt;</span> <span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">indication</span><span class="special">(</span><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">indication</span><span class="special">::</span><span class="identifier">user_register</span><span class="special">)</span>
    <span class="special">&amp;</span> <span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">tlv_query_type_list</span><span class="special">(</span><span class="identifier">supp_iq</span><span class="special">);</span>
<span class="identifier">m</span><span class="special">.</span><span class="identifier">destination</span><span class="special">(</span><span class="identifier">odtone</span><span class="special">::</span><span class="identifier">mih</span><span class="special">::</span><span class="identifier">id</span><span class="special">(</span><span class="string">"local-mihf"</span><span class="special">));</span>

<span class="identifier">_mihf</span><span class="special">.</span><span class="identifier">async_send</span><span class="special">(</span><span class="identifier">m</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">bind</span><span class="special">(&amp;</span><span class="identifier">miis_rdf_server</span><span class="special">::</span><span class="identifier">user_reg_handler</span><span class="special">,</span> <span class="keyword">this</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">cref</span><span class="special">(</span><span class="identifier">cfg</span><span class="special">),</span> <span class="identifier">_2</span><span class="special">));</span>
</pre>
<p>
      </p>
<p>
        <span class="bold"><strong>Link SAP</strong></span>
</p>
<pre class="programlisting"><span class="identifier">init</span><span class="special">();</span>
</pre>
<p>
      </p>
<p>
        <span class="bold"><strong>Link SAP ICMP</strong></span>
</p>
<pre class="programlisting"><span class="identifier">register_local_mihf</span><span class="special">();</span>
</pre>
<p>
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2009-2013 Universidade Aveiro<br>Copyright &#169; 2009-2013 Instituto de Telecomunica&#231;&#245;es - P&#243;lo Aveiro<p>
        This software is distributed under a license. The full license agreement
        can be found in the LICENSE in this distribution. This software may not be
        copied, modified, sold or distributed other than expressed in the named license
        agreement. This software is distributed without any warranty.
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="remote_discovery.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../extensions.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="mih_protocol_c_interface.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
