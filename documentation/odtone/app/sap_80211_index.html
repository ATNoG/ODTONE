<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Windows sap_80211 Link SAP</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../index.html" title="ODTONE 0.6">
<link rel="up" href="../app.html" title="Applications">
<link rel="prev" href="sap_80211_linux_index.html" title="Linux sap_80211 Link SAP">
<link rel="next" href="sap_8023_index.html" title="Linux sap_8023 Link SAP">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="'ODTONE - Open Dot Twenty One'" width="100" height="100" src="../.././images/logo.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="sap_80211_linux_index.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../app.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="sap_8023_index.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="odtone.app.sap_80211_index"></a><a class="link" href="sap_80211_index.html" title="Windows sap_80211 Link SAP">Windows sap_80211 Link SAP</a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.architecture">Architecture</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.getting_started">Getting
        Started</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support">Support</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.extending">Extending</a></span></dt>
</dl></div>
<p>
        The sap_80211 Link SAP is a Windows implementation of a Link SAP for 802.11
        interfaces.
      </p>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="odtone.app.sap_80211_index.architecture"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.architecture" title="Architecture">Architecture</a>
</h4></div></div></div>
<p>
          The following figure illustrates where the LinkSAP is positioned within
          the ODTONE architecture.
        </p>
<p>
          <span class="inlinemediaobject"><img src="../.././images/windows_link_sap_conceptual_view.png" alt="windows_link_sap_conceptual_view"></span>
        </p>
<p>
          This SAP works as a means of communication between the MIHF and a layer
          2 interface. Although the SAP is instanced on an OS (in this case, Windows)
          its main purpose is to abstract the use of one, since its interface is
          the same as any SAP for any other device.
        </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="odtone.app.sap_80211_index.getting_started"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.getting_started" title="Getting Started">Getting
        Started</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.getting_started.configuration">Configuration</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.getting_started.running">Running</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="odtone.app.sap_80211_index.getting_started.configuration"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.getting_started.configuration" title="Configuration">Configuration</a>
</h5></div></div></div>
<p>
            The config file should be found in the root folder for the application.
            Configurable parameters are not case sensitive and can be found as follows
            (as shown in the file itself):
          </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>interface_Mac :</strong></span> The MAC Address for
              the 802.11 interface this SAP should run on. This should represent
              a network interface on the computer and should be formatted as xx:xx:xx:xx:xx:xx
              with &#8220;xx&#8221; being the MAC Address values.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>myID :</strong></span> The MIH ID for this SAP, this
              is used in communication with the MIHF to identify the SAP. This parameter
              is a string and its default value is &#8220;link1&#8221;.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>rcv_port:</strong></span> The port where this SAP
              will listen for communication from the MIHF. This parameter is an integer
              and its default value is &#8220;1235&#8221;.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>send_port:</strong></span> The port where this SAP
              will send information, has to be the same port as the MIHF is listening.
              This parameter is an integer and its default value is &#8220;1025&#8221;.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>mihf_ip:</strong></span> The IP for the MIHF communication
              with this SAP. This parameter is a string, should be formatted as an
              IP address &#8211; xxx.xxx.xxx.xxx &#8211; and defaults to &#8220;127.0.0.1&#8221;.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>mihfID :</strong></span> The ID for the MIHF this
              SAP will communicate with, this has to coincide with the ID given to
              the MIHF itself. This parameter is a string and its default value is
              &#8220;local-mihf&#8221;.
            </p></td></tr>
</table></div>
<p>
            The following parameters are all Boolean in format, and represent possible
            event subscriptions and their default values:
          </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_LinkDet:</strong></span> Event launched when a
              new network is detected. Defaults to true.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_LinkUp:</strong></span> Event launched when a
              connection with a network is established. Defaults to true.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_LinkDown:</strong></span> Event launched when
              a connection to a network is terminated or lost. Defaults to true.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_LinkParamRpt:</strong></span> Event launched whenever
              a link parameter changes. Currently only supported for Signal Strength
              of the current connection. Defaults to true.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_LinkGoingDown:</strong></span> Event launched
              when the current connection is about to be lost. This is currently
              not implemented and defaults to false.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_HandoverIm:</strong></span> Event launched when
              a handover is imminent. This is currently not implemented and defaults
              to false.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_HandoverCm:</strong></span> Event launched when
              a handover is complete. This is currently not implemented and defaults
              to false.
            </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
              <span class="bold"><strong>sub_PDU_TransmitSt:</strong></span> Event indicates
              the transmission status of a higher layer PDU by the link layer. This
              is currently not implemented and defaults to false.
            </p></td></tr>
</table></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="odtone.app.sap_80211_index.getting_started.running"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.getting_started.running" title="Running">Running</a>
</h5></div></div></div>
<p>
            To run the Link SAP simply run the executable and if the configurations
            are well made, the SAP should turn itself on and standby for commands
            from the MIHF.
          </p>
<p>
            This SAP has been tested and is fully working on Windows Vista, 7 and
            8.
          </p>
<p>
            It is also expected to run well in some versions of XP, but full compatibility
            is not guaranteed.
          </p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support" title="Support">Support</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events">Events</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands">Commands</a></span></dt>
</dl></div>
<p>
          This section is a reading on special considerations for the structuring
          of the code, and how to hack specific features.
        </p>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events" title="Events">Events</a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_going_down">Link_Going_Down</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_handover_imminent">Link_Handover_Imminent</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_handover_complete">Link_Handover_Complete</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_pdu_transmit_status">Link_PDU_Transmit_Status</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_detected">Link_Detected</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_up">Link_Up</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_down">Link_Down</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_parameters_report">Link_Parameters_Report</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_going_down"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_going_down" title="Link_Going_Down">Link_Going_Down</a>
</h6></div></div></div>
<p>
              Not supported.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_handover_imminent"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_handover_imminent" title="Link_Handover_Imminent">Link_Handover_Imminent</a>
</h6></div></div></div>
<p>
              Not supported.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_handover_complete"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_handover_complete" title="Link_Handover_Complete">Link_Handover_Complete</a>
</h6></div></div></div>
<p>
              Not supported.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_pdu_transmit_status"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_pdu_transmit_status" title="Link_PDU_Transmit_Status">Link_PDU_Transmit_Status</a>
</h6></div></div></div>
<p>
              Not supported.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_detected"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_detected" title="Link_Detected">Link_Detected</a>
</h6></div></div></div>
<p>
              This event is launched whenever the Wlan API finishes a scan (represented
              by the API-defined ACM code for ScanComplete (Wlan.WlanNotificationCodeAcm.ScanComplete)
              and a new link is detected.
            </p>
<p>
              Every time a scan is complete the discovered SSIDs are stored and compared
              with the previous registry. Any new links are sent to the MIHF as a
              Link_Detected.Indication message and the list of previously found SSIDs
              are replaced.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_up"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_up" title="Link_Up">Link_Up</a>
</h6></div></div></div>
<p>
              This event is launched whenever the Wlan API launches a ConnectionComplete
              ACM notification code (Wlan.WlanNotificationCodeAcm.ConnectionComplete).
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_down"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_down" title="Link_Down">Link_Down</a>
</h6></div></div></div>
<p>
              This event is launched whenever the Wlan API launches a Disconnected
              ACM notification code (Wlan.WlanNotificationCodeAcm.Disconnected).
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.events.link_parameters_report"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.events.link_parameters_report" title="Link_Parameters_Report">Link_Parameters_Report</a>
</h6></div></div></div>
<p>
              This event is launched in 4 situations:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
                  The Wlan API launches a SignalQualityChange MSM notification code
                  (Wlan.WlanNotificationCodeMsm.SignalQualityChange)
                </li>
<li class="listitem">
                  A threshold has been met for a certain parameter
                </li>
<li class="listitem">
                  A periodic report has been requested for a parameter
                </li>
<li class="listitem">
                  A Link_Get_Parameters.Request message is received
                </li>
</ul></div>
<p>
              Currently, not all parameters types are supported. Only the following:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
                  <span class="emphasis"><em>LINK_PARAM_80211</em></span>
                  <div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
                        <span class="emphasis"><em>RSSI</em></span>: actually, it's the signal energy
                        in dBm.
                      </li></ul></div>
                </li>
<li class="listitem">
                  <span class="emphasis"><em>LINK_PARAM_GEN</em></span>
                  <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
                        <span class="emphasis"><em>DATA_RATE</em></span>: the maximum allowed data
                        transfer rate for the connected link.
                      </li>
<li class="listitem">
                        <span class="emphasis"><em>SIGNAL_STRENGTH</em></span>: the signal power in
                        percentage.
                      </li>
<li class="listitem">
                        <span class="emphasis"><em>PACKET_ERROR_RATE</em></span>: the error rate for
                        this link, in percentage, counted as an all-time statistic,
                        not just recently.
                      </li>
</ul></div>
                </li>
</ul></div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands" title="Commands">Commands</a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.capability_discover">Capability_Discover</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.event_subscribe">Event_Subscribe</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.event_unsubscribe">Event_Unsubscribe</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.link_get_parameters">Link_Get_Parameters</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.link_configure_thresholds">Link_Configure_Thresholds</a></span></dt>
<dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.link_action">Link_Action</a></span></dt>
</dl></div>
<p>
            All commands are handled within the LINK_SAP_CS_80211. Connection.MIHProtocol.MessageHandler
            class, via the static method HandleMessage(Message).
          </p>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands.capability_discover"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.capability_discover" title="Capability_Discover">Capability_Discover</a>
</h6></div></div></div>
<p>
              Defined in the HandleCapabilityDiscover function, this returns to the
              MIHF a list of supported commands and events by this SAP. This list
              can be changed within the code, in the LINK_SAP_80211.Capabilities.CapabilitiesHandler
              class, by changing the corresponding attributes.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands.event_subscribe"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.event_subscribe" title="Event_Subscribe">Event_Subscribe</a>
</h6></div></div></div>
<p>
              Defined in the HandleSubscribe function, this registers within the
              SAP a subscription to a certain event, letting the SAP send its corresponding
              event message to the MIHF whenever it occurs.
            </p>
<p>
              When a new subscription request is received, all existing subscriptions
              are kept and the new ones added [there is no replacement of subscriptions,
              you have to run an Event_Unsubscribe command]. Subscriptions are initialized
              as specified on the configuration file.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands.event_unsubscribe"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.event_unsubscribe" title="Event_Unsubscribe">Event_Unsubscribe</a>
</h6></div></div></div>
<p>
              Defined in the HandleUnsubscribe function, this cancels an existing
              subscription to whatever events the Link_Event_List parameter has.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands.link_get_parameters"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.link_get_parameters" title="Link_Get_Parameters">Link_Get_Parameters</a>
</h6></div></div></div>
<p>
              Defined in the HandleGetParameters function, this handles parameter
              requests from the MIHF and returns them. Currently supported parameters
              are:
            </p>
<p>
              Currently, not all parameters types are supported. Only the following:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
                  <span class="emphasis"><em>LINK_PARAM_80211</em></span>
                  <div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
                        <span class="emphasis"><em>RSSI</em></span>: actually, it's the signal energy
                        in dBm.
                      </li></ul></div>
                </li>
<li class="listitem">
                  <span class="emphasis"><em>LINK_PARAM_GEN</em></span>
                  <div class="itemizedlist"><ul class="itemizedlist" type="circle">
<li class="listitem">
                        <span class="emphasis"><em>DATA_RATE</em></span>: the maximum allowed data
                        transfer rate for the connected link.
                      </li>
<li class="listitem">
                        <span class="emphasis"><em>SIGNAL_STRENGTH</em></span>: the signal power in
                        percentage.
                      </li>
<li class="listitem">
                        <span class="emphasis"><em>PACKET_ERROR_RATE</em></span>: the error rate for
                        this link, in percentage, counted as an all-time statistic,
                        not just recently.
                      </li>
</ul></div>
                </li>
</ul></div>
<p>
              The values for these parameters are taken from the LINK_SAP_CS_80211.Information.InterfaceInfoProvider.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands.link_configure_thresholds"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.link_configure_thresholds" title="Link_Configure_Thresholds">Link_Configure_Thresholds</a>
</h6></div></div></div>
<p>
              Defined in the HandleConfigThresholds function, this adds or removes
              one or several thresholds to a specific list according to the following
              parameters:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
                  If a timer is specified, it is considered a periodic report, and
                  the threshold is treated seperatly. So, it is checked at the specified
                  interval and returned regardless of threshold value.
                </li>
<li class="listitem">
                  Any sent threshold, with or without timer is placed in a separate
                  queue, whenever the threshold is met, the Link_Parameters_Report
                  is sent and the threshold (in case it&#8217;s a one-shot) is deleted
                  from the list.
                </li>
</ul></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="odtone.app.sap_80211_index.sap_80211_support.commands.link_action"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.sap_80211_support.commands.link_action" title="Link_Action">Link_Action</a>
</h6></div></div></div>
<p>
              Defined in the HandleCommandLinkActions function, this handles specific
              actions. After whatever the specified delay (note that this is a required
              parameter, even if 0) the action is carried out.
            </p>
<p>
              For the <span class="emphasis"><em>LINK_AC_TYPE</em></span> actions, all are supported,
              except <span class="emphasis"><em>LINK_LOW_POWER</em></span>, thus the list being:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
                  <span class="emphasis"><em>LINK_DISCONNECT</em></span>: Disconnects the current connection
                </li>
<li class="listitem">
                  <span class="emphasis"><em>LINK_POWER_DOWN</em></span>: Disables the interface
                </li>
<li class="listitem">
                  <span class="emphasis"><em>LINK_POWER_UP</em></span> Enables the interface
                </li>
</ul></div>
<p>
              As for the <span class="emphasis"><em>LINK_AC_ATTR</em></span> additional actions, only
              one is supported:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
                  <span class="emphasis"><em>LINK_SCAN</em></span>: This requests a network scan and
                  returns results, however, the OS decides when it occurs so the
                  response to this action is delayed and the MIHF should have that
                  into account when considering response timeouts.
                </li></ul></div>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="odtone.app.sap_80211_index.extending"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.extending" title="Extending">Extending</a>
</h4></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="sap_80211_index.html#odtone.app.sap_80211_index.extending.supporting_new_commands">Supporting
          new commands</a></span></dt></dl></div>
<p>
          This section explains some extending procedures with coding examples. In
          the code sections, the comments will help look at the right content.
        </p>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="odtone.app.sap_80211_index.extending.supporting_new_commands"></a><a class="link" href="sap_80211_index.html#odtone.app.sap_80211_index.extending.supporting_new_commands" title="Supporting new commands">Supporting
          new commands</a>
</h5></div></div></div>
<p>
            In the Connection/MIHProtocol folder, you will find the MessageHandler.cs
            file, containing its corresponding class. To add a new handler, simply
            follow the pattern used and add a case for the ActionID you want along
            with the handler function. Note that the handle function must include
            the reply procedure.
          </p>
<p>
</p>
<pre class="programlisting"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="identifier">HandleMessage</span><span class="special">(</span><span class="identifier">Message</span> <span class="identifier">m</span><span class="special">)</span>
       <span class="special">{</span>
            <span class="keyword">switch</span> <span class="special">(</span><span class="identifier">m</span><span class="special">.</span><span class="identifier">MIHHeader</span><span class="special">.</span><span class="identifier">MID</span><span class="special">.</span><span class="identifier">AID</span><span class="special">)</span>
            <span class="special">{</span>
                <span class="keyword">case</span> <span class="identifier">AIDGlobal</span><span class="special">.</span><span class="identifier">SERVICE_MANAGEMENT_MIH_CAPABILITY_DISCOVER</span><span class="special">:</span>
                    <span class="identifier">HandleCapabilityDiscover</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
                    <span class="keyword">break</span><span class="special">;</span>
                <span class="keyword">case</span> <span class="identifier">AIDGlobal</span><span class="special">.</span><span class="identifier">COMMAND_SERVICE_MIH_LINK_ACTIONS</span><span class="special">:</span>
                    <span class="identifier">HandleCommandLinkActions</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
                    <span class="keyword">break</span><span class="special">;</span>
                <span class="keyword">case</span> <span class="identifier">AIDGlobal</span><span class="special">.</span><span class="identifier">SERVICE_MANAGEMENT_MIH_EVENT_SUBSCRIBE</span><span class="special">:</span>
                    <span class="identifier">HandleSubscribe</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
                    <span class="keyword">break</span><span class="special">;</span>
                <span class="keyword">case</span> <span class="identifier">AIDGlobal</span><span class="special">.</span><span class="identifier">SERVICE_MANAGEMENT_MIH_EVENT_UNSUBSCRIBE</span><span class="special">:</span>
                    <span class="identifier">HandleUnsubscribe</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
                    <span class="keyword">break</span><span class="special">;</span>
                <span class="keyword">case</span> <span class="identifier">AIDGlobal</span><span class="special">.</span><span class="identifier">COMMAND_SERVICE_MIH_LINK_CONFIGURE_THRESHOLDS</span><span class="special">:</span>
                    <span class="identifier">HandleConfigThresholds</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
                    <span class="keyword">break</span><span class="special">;</span>
                <span class="keyword">case</span> <span class="identifier">AIDGlobal</span><span class="special">.</span><span class="identifier">COMMAND_SERVICE_MIH_LINK_GET_PARAMETERS</span><span class="special">:</span>
                    <span class="identifier">HandleGetParameters</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
                    <span class="keyword">break</span><span class="special">;</span>

				<span class="comment">// Your code goes here</span>

            <span class="special">}</span>
       <span class="special">}</span>
</pre>
<p>
          </p>
<p>
            Note that to add new functionalities you have to first add them to the
            AIDGlobal data. This can be done via the Message class in the DLL project
            (DLLs/MIH/MIHProtocol/Message.cs) on the GlobalAID enum (you also have
            to change any required enums, for example, if you want to add a command,
            you should also add to the AIDCommandService enum). You also have to
            set the global function to recognize it, this can be done by adding a
            case in the switch corresponding to your action type on the GetAID function.
            So, in short:
          </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
                <span class="emphasis"><em>On the Message class (DLLs/MIH/MIHProtocol/Message.cs):</em></span>
                <div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
                      Add the new action to the corresponding enum (AIDCommandService,
                      AIDEventService, etc)
                    </li>
<li class="listitem">
                      Add the new action to the AIDGlobal enum
                    </li>
<li class="listitem">
                      Add recognition on the GetAID function
                    </li>
</ol></div>
              </li>
<li class="listitem">
                <span class="emphasis"><em>On the MessageHandler class (Connection/MIHProtocol/MessageHandler.cs):</em></span>
                <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                      Handle the new action in the HandleMessage function
                    </li></ol></div>
              </li>
</ul></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2009-2013 Universidade Aveiro<br>Copyright &#169; 2009-2013 Instituto de Telecomunica&#231;&#245;es - P&#243;lo Aveiro<p>
        This software is distributed under a license. The full license agreement
        can be found in the LICENSE in this distribution. This software may not be
        copied, modified, sold or distributed other than expressed in the named license
        agreement. This software is distributed without any warranty.
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="sap_80211_linux_index.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../app.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="sap_8023_index.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
